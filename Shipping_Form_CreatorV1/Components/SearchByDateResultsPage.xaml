<Page
    x:Class="Shipping_Form_CreatorV1.Components.SearchByDateResultsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Notification="clr-namespace:Syncfusion.Windows.Controls.Notification;assembly=Syncfusion.SfBusyIndicator.WPF"
    xmlns:local="clr-namespace:Shipping_Form_CreatorV1.Components"
    xmlns:syncfusion="http://schemas.syncfusion.com/wpf"
    xmlns:syncfusionskin="clr-namespace:Syncfusion.SfSkinManager;assembly=Syncfusion.SfSkinManager.WPF"
    Title="Search Results"
    syncfusionskin:SfSkinManager.Theme="{syncfusion:SkinManager ThemeName=Windows11Light}">


    <!--  Hook command handlers on the page  -->
    <Page.CommandBindings>
        <CommandBinding Command="{x:Static local:SearchByDateResultsPage.OpenPackingListCommand}" Executed="OpenPackingList_Executed" />
        <CommandBinding Command="{x:Static local:SearchByDateResultsPage.OpenBolCommand}" Executed="OpenBol_Executed" />
    </Page.CommandBindings>

    <Notification:SfBusyIndicator
        AnimationType="Gear"
        Foreground="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
        IsBusy="{Binding IsBusy}"
        ViewboxHeight="200"
        ViewboxWidth="200">
        <Grid HorizontalAlignment="Center">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <StackPanel
                Grid.Row="0"
                HorizontalAlignment="Center"
                Orientation="Horizontal">
                <TextBlock
                    FontSize="25"
                    FontWeight="Bold"
                    Text="ORDERS SHIPPED " />
                <TextBlock
                    FontSize="25"
                    FontWeight="Bold"
                    Text="{Binding SearchDateString}" />
            </StackPanel>
            <syncfusion:SfDataGrid
                x:Name="searchResultsDataGrid"
                Grid.Row="1"
                Margin="10"
                AllowResizingColumns="True"
                AutoGenerateColumns="False"
                GridLinesVisibility="Both"
                IsReadOnly="True"
                ItemsSource="{Binding ElementName=DataPager, Path=PagedSource}"
                MouseDoubleClick="SearchResultsDataGrid_OnMouseDoubleClick"
                RowHeight="30"
                SelectedItem="{Binding SelectedReport, Mode=TwoWay}">

                <!--  Row-level context menu  -->


                <!--  Columns  -->
                <syncfusion:SfDataGrid.Columns>
                    <syncfusion:GridNumericColumn
                        Width="100"
                        HeaderText="Order #"
                        TextAlignment="Right"
                        ValueBinding="{Binding Header.OrderNumber}" />
                    <syncfusion:GridTextColumn
                        Width="200"
                        HeaderText="Customer #"
                        TextAlignment="Right"
                        ValueBinding="{Binding Header.ShipToCustNumber}" />
                    <syncfusion:GridTextColumn
                        Width="200"
                        HeaderText="Ship To"
                        TextAlignment="Right"
                        ValueBinding="{Binding Header.ShipToName}" />
                    <syncfusion:GridTextColumn
                        Width="150"
                        HeaderText="City, State"
                        TextAlignment="Right"
                        ValueBinding="{Binding Header.ShipToCityStZip}" />
                    <syncfusion:GridTextColumn
                        Width="150"
                        HeaderText="Carrier"
                        TextAlignment="Right"
                        ValueBinding="{Binding Header.CarrierName}" />
                </syncfusion:SfDataGrid.Columns>
                <syncfusion:SfDataGrid.RecordContextMenu>
                    <ContextMenu>
                        <MenuItem
                            Command="{x:Static local:SearchByDateResultsPage.OpenPackingListCommand}"
                            CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                            Header="Open Packing List" />
                        <MenuItem
                            Command="{x:Static local:SearchByDateResultsPage.OpenBolCommand}"
                            CommandParameter="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource AncestorType=ContextMenu}}"
                            Header="Open Bill of Lading" />
                    </ContextMenu>
                </syncfusion:SfDataGrid.RecordContextMenu>
            </syncfusion:SfDataGrid>
            <syncfusion:SfDataPager
                x:Name="DataPager"
                Grid.Row="2"
                HorizontalAlignment="Center"
                PageSize="25"
                Source="{Binding SearchByDateResults}" />
        </Grid>
    </Notification:SfBusyIndicator>
</Page>
